# 项目目录结构模板

> 现状：仓库使用 qmake（`DefectDetection.pro`），无 CMakeLists，无打包脚本。以下列出当前主要目录和命名约定。

---

## 1. 顶层结构

```
DefectDetection/
├── DefectDetection.pro        # 根 qmake 工程
├── config/                    # qmake 配置、临时构建产物（当前含 bin/）
├── docs/                      # 文档
├── include/                   # 公开头文件（如有）
├── models/                    # 模型/标定文件
├── resources/                 # 图标/样式/翻译
├── scripts/                   # 目前为空，待补打包/部署脚本
├── src/                       # 源码（多子模块，见下）
├── tests/                     # 测试
├── third_party/               # 三方依赖源码或预编译
└── build/                     # 构建输出（按 Kit 区分，忽略提交）
```

---

## 2. 源码子目录

- `src/app/`：流程编排、入口、看门狗、配置热加载。
- `src/algorithm/`：检测器、预处理、评分、DNN 扩展。
- `src/hal/`：相机/光源/PLC/IO 抽象与实现。
- `src/ui/`：Qt UI 窗口、控件、对话框。
- `src/data/`：数据库访问、导出、审计日志。
- `src/network/`：REST/WebSocket/MES 客户端。
- `src/common/`：日志、配置校验、线程池、类型等通用组件。

各子目录配有对应的 `.pro` 子项目，根 `.pro` 采用 `SUBDIRS` 组织。

---

## 3. 命名与输出
- 类名 PascalCase，成员 camelCase，常量 SCREAMING_SNAKE。
- 可执行默认输出：`build/<Kit>/src/app/DefectDetection[.exe]`。
- 库文件当前构建会放在 `build/<Kit>/src/<module>/`，部分调试构建名称带数字后缀。

---

## 4. 忽略建议

`.gitignore` 需覆盖：
```
build/
*.user
*.pro.user
*.log
*.db
*.dll
*.so
*.dylib
*.pdb
*.obj
CMakeCache.txt
cmake-build-
.vscode/
.idea/
```

---

## 5. 初始化与构建示例

```bash
# 克隆
# git clone <repo-url>
cd DefectDetection

# 以 MinGW 为例的 Release 构建
mkdir build && cd build
qmake -r ../DefectDetection.pro CONFIG+=release -spec win32-g++
mingw32-make -j8
```

Qt Creator 构建：打开 `DefectDetection.pro`，选择合适 Kit，构建 Release，产物在 `build/<Kit>/src/app/`。
